# TMDB Go Proxy - Redis集群环境变量配置示例
# 复制此文件为 .env 并修改相应的值

# =============================================================================
# 基础配置
# =============================================================================
PORT=6635
LOG_LEVEL=info

# =============================================================================
# API安全配置
# =============================================================================
# API访问密钥 (强烈建议设置，用于保护敏感API端点)
# 如果不设置，敏感端点将记录警告但允许访问
API_KEY=your_secure_api_key_here

# =============================================================================
# TMDB API配置
# =============================================================================
TMDB_API_KEY=your_tmdb_api_key_here
UPSTREAM_TYPE=tmdb-api

# =============================================================================
# Redis集群配置
# =============================================================================
USE_REDIS=true

# Redis集群节点 (修改为你的实际域名或IP)
REDIS_CLUSTER_NODES=singapore.your-domain.com:6379,shanghai.your-domain.com:6379,seoul.your-domain.com:6379,osaka.your-domain.com:6379,amsterdam.your-domain.com:6379

# Redis认证 (生产环境建议设置)
REDIS_PASSWORD=your_secure_redis_password

# Redis数据库
REDIS_DB=0

# =============================================================================
# Redis连接池配置
# =============================================================================
REDIS_POOL_SIZE=15
REDIS_MIN_IDLE_CONNS=3
REDIS_CONNECT_TIMEOUT=5
REDIS_READ_TIMEOUT=3
REDIS_WRITE_TIMEOUT=3
REDIS_IDLE_TIMEOUT=300
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=500

# =============================================================================
# 缓存TTL配置 (分钟)
# =============================================================================
# 基础缓存时间
MEMORY_CACHE_TTL=15
DISK_CACHE_TTL=360

# JSON数据缓存
JSON_MEMORY_TTL=15      # 内存缓存15分钟
JSON_DISK_TTL=360       # Redis缓存6小时

# 图片缓存
IMAGE_MEMORY_TTL=30     # 内存缓存30分钟
IMAGE_DISK_TTL=10080    # Redis缓存7天
IMAGE_SKIP_MEMORY=false

# =============================================================================
# 内存缓存配置
# =============================================================================
MEMORY_CACHE_SIZE=100
CACHE_MAX_SIZE=2000
MEMORY_CACHE_CLEANUP_INTERVAL=1
DISK_CACHE_CLEANUP_INTERVAL=5

# =============================================================================
# 健康检查配置
# =============================================================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_INITIAL_DELAY=10
UNHEALTHY_TIMEOUT=900
MAX_ERRORS_BEFORE_UNHEALTHY=3

# =============================================================================
# 超时配置 (秒)
# =============================================================================
INITIAL_TIMEOUT=8
PARALLEL_TIMEOUT=20
REQUEST_TIMEOUT=300

# =============================================================================
# 负载均衡配置
# =============================================================================
BASE_WEIGHT_MULTIPLIER=20
DYNAMIC_WEIGHT_MULTIPLIER=50
ALPHA_INITIAL=0.5
ALPHA_ADJUSTMENT_STEP=0.05
MAX_SERVER_SWITCHES=3

# =============================================================================
# 网络代理配置 (可选)
# =============================================================================
HTTP_PROXY=
HTTPS_PROXY=

# =============================================================================
# 其他配置
# =============================================================================
TZ=Asia/Shanghai
CUSTOM_CONTENT_TYPE=application/json

